---
title: "Recommendation System: Data Collection"
date: "2023-06-14"
readingTime: 2 mins
img: "/images/portfolios/recommendation-system/spotify.webp"
description: "Collecting my favorite songs' metadata from Spotify"
tags: [ml, python]
authors: ["Bijon Setyawan Raya"]
publish: true
series: true
---

<Series
  type="portfolio"
  series="Music Recommendation Sytem"
  posts={[
    {
      title: "Data Collection",
      slug: "recommendation-system-data-collection",
    },
    {
      title: "Data Preprocessing",
      slug: "recommendation-system-data-preprocessing",
    }
  ]}
  currentPost="Data Collection"
/>

In this post of this series, I will be collecting those songs that I liked and saved in my playlists.

![My Spotify homepage](/images/portfolios/recommendation-system/spotify-ui.png "My Spotify homepage")

Since I am already subscribed to Spotify, I can use their API to get songs' metadata.
Unfortunately, I had finished writing my own function after stumbling upon a framework called [Spotipy](https://spotipy.readthedocs.io/en/2.18.0/) that can be used to interact with Spotify API.

[Click here](https://github.com/bsraya/data-science-portfolio/blob/main/fetch-random-songs.py) to see the script on GitHub.

There are endpoints that I used to collect the metadata of songs in my own playlist and also songs in the playlists that I never listened to:
1. `https://accounts.spotify.com/authorize` to get the access token
2. `https://accounts.spotify.com/api/token` to get the refresh token
3. `https://api.spotify.com/v1/me/playlists` to get all of my playlists
4. `https://api.spotify.com/v1/browse/categories/{category_id}/playlists` to get all of the playlists in a category
5. `https://api.spotify.com/v1/playlists/{playlist['id']}/tracks` to get all of the tracks in a playlist
6. `https://api.spotify.com/v1/tracks?ids={track_ids}` to get the tracks' metadata in a bulk
7. `https://api.spotify.com/v1/audio-features?ids={track_ids}` to get the tracks' audio features in a bulk

What metadata that I collected from the API are:
1. id
2. name
3. artists
4. popularity
5. danceability
6. energy
7. key
8. loudness
9. mode
10. speechiness
11. acousticness
12. instrumentalness
13. liveness
14. valence
15. tempo
16. duration_ms
17. time_signature

To get more details on what each attribute means, you can visit [this link](https://developer.spotify.com/documentation/web-api/reference/get-several-audio-features)

Here is one of the examples of the metadata that I collected:
```txt
id                                             2i2gDpKKWjvnRTOZRhaPh2
title                                                       Moonlight
artist(s)                                                  Kali Uchis
popularity                                                         88
danceability                                                    0.639
energy                                                          0.723
key                                                                 7
loudness                                                       -6.462
mode                                                                0
speechiness                                                    0.0532
acousticness                                                    0.511
instrumentalness                                                  0.0
liveness                                                        0.167
valence                                                         0.878
tempo                                                         136.872
type                                                   audio_features
uri                              spotify:track:2i2gDpKKWjvnRTOZRhaPh2
track_href          https://api.spotify.com/v1/tracks/2i2gDpKKWjvn...
analysis_url        https://api.spotify.com/v1/audio-analysis/2i2g...
duration_ms                                                    187558
time_signature                                                      4
```

So far, I collected almost 2000 songs' metadata. I will be using these data to build a recommendation system in the next post.